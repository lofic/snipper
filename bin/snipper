#!/usr/bin/ruby

require 'rubygems'
require 'snipper'
require 'thor'

class MyCLI<Thor
  desc "add [FILE1..5]", "add a snippet"
  option :syntax, :desc => "Language to use for the new snippet", :default => "ruby", :type => :string, :aliases => ["-l", "--lang", "-s"]
  def add(file1=nil, file2=nil, file3=nil, file4=nil, file5=nil)
    puts Snipper::Util.new([file1, file2, file3, file4, file5].compact, options[:syntax])
  end

  desc "append [SNIPPET] [FILE1..5]", "appends a file to an existing snippet"
  option :syntax, :desc => "Language to use for the new snippet", :default => "ruby", :type => :string, :aliases => ["-l", "--lang", "-s"]
  def append(snippet, file1=nil, file2=nil, file3=nil, file4=nil, file5=nil)
    puts Snipper::Util.append(snippet, [file1, file2, file3, file4, file5].compact, options[:syntax])
  end

  desc "delete [SNIPPET]", "deletes an existing snippet"
  def delete(snippet)
    Snipper::Util.delete(snippet)
  end

  desc "edit [SNIPPET]", "edits an existing snippet"
  def edit(snippet)
    puts Snipper::Util.edit(snippet)
  end

  desc "view [SNIPPET]", "views an existing snippet"
  def view(snippet)
    puts Snipper::Util.view(snippet)
  end

  desc "languages", "list known languages"
  def languages
    Snipper::Util.list_langs
  end

  default_task :add
end

MyCLI.start(ARGV)
